<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<body>
...
<a th:fragment="my-orders-button">

    <th:block th:if="${#request.getRemoteUser() != null}">
        <a class="btn btn-warning btn-sm ml-3" href="/order/placed">
            <i class="fas fa-history"></i> My orders
            <span class="badge badge-light" id="numberOfOrdersForCurrentUser">  </span>
        </a>
    </th:block>


    <script>
        document.onload(getNumberOfOrdersForCurrentUser());

        async function getNumberOfOrdersForCurrentUser() {
            let response = await fetch('/api/order/total');
            document.getElementById("numberOfOrdersForCurrentUser").textContent = await response.json();
        }
    </script>
</a>
</body>
</html>